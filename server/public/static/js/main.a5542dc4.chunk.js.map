{"version":3,"sources":["components/Navbar/Navbar.jsx","logo.svg","pages/HomePage.jsx","utils/consts.js","services/auth.js","pages/Signup.jsx","utils/paths.js","pages/LogIn.jsx","pages/ProtectedPage.jsx","routing-components/NormalRoute.jsx","routing-components/ProtectedRoute.jsx","App.js","index.js"],"names":["Navbar","props","to","className","user","onClick","handleLogout","HomePage","src","logo","alt","href","target","rel","ACCESS_TOKEN","APP_NAME","toUpperCase","slice","toLowerCase","internalServerError","err","status","errorMessage","successStatus","res","data","authService","axios","create","baseURL","process","Signup","authenticate","useState","username","email","password","formData","setFormData","handleChange","event","name","value","onSubmit","preventDefault","credentials","post","then","catch","signup","console","log","localStorage","setItem","CONSTS","accessToken","history","push","htmlFor","id","type","placeholder","onChange","required","minLength","LogIn","login","ProtectedPage","NormalRoute","exact","path","component","componentProps","Component","render","ProtectedRoute","App","setUser","useEffect","getItem","get","headers","Authorization","delete","error","removeItem","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a5542dc4.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Navbar.css';\r\n\r\nconst Navbar = (props) => {\r\n\treturn (\r\n\t\t<nav>\r\n\t\t\t<Link to={'/'} className='nav__projectName'>\r\n\t\t\t\tYour app name\r\n\t\t\t</Link>\r\n\r\n\t\t\t<div className='nav__authLinks'>\r\n\t\t\t\t{props.user ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Link to={'/protected'} className='authLink'>\r\n\t\t\t\t\t\t\tProtected Page\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<button className='nav-logoutbtn' onClick={props.handleLogout}>\r\n\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Link to={'/auth/signup'} className='authLink'>\r\n\t\t\t\t\t\t\tSignup\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<Link to={'auth/login'} className='authLink'>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default Navbar;\r\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from \"../logo.svg\";\r\nimport \"../App.css\";\r\n\r\nfunction HomePage() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        <p>\r\n          Edit <code>src/App.js</code> and save to reload.\r\n        </p>\r\n        <a\r\n          className=\"App-link\"\r\n          href=\"https://reactjs.org\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Learn React\r\n        </a>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","export const ACCESS_TOKEN = \"access_token\";\r\nconst APP_NAME = \"newapp\";\r\nexport const CAPITALIZED_APP =\r\n  APP_NAME[0].toUpperCase() + APP_NAME.slice(1).toLowerCase();\r\n","import axios from 'axios';\r\nimport * as CONSTS from '../utils/consts';\r\n\r\n// here we are just maing our code look more DRY. With every backend call we must deal with errors and success states. The idea of creating these kinds of services is to make our lives easier in the components\r\nfunction internalServerError(err) {\r\n\treturn {\r\n\t\tstatus: false,\r\n\t\terrorMessage: 'Internal server error. Please check your server'\r\n\t};\r\n}\r\n\r\nfunction successStatus(res) {\r\n\treturn {\r\n\t\tstatus: true,\r\n\t\tdata: res.data\r\n\t};\r\n}\r\n\r\n// creates a basic url for every request in this file\r\nconst authService = axios.create({\r\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/auth`\r\n});\r\n\r\nexport function login(credentials) {\r\n\treturn authService\r\n\t\t.post('/login', credentials)\r\n\t\t.then(successStatus)\r\n\t\t.catch(internalServerError);\r\n}\r\n\r\nexport function getLoggedIn() {\r\n\treturn authService\r\n\t\t.get(`/session`, {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(successStatus)\r\n\t\t.catch(internalServerError);\r\n}\r\n\r\nexport function signup(credentials) {\r\n\treturn authService\r\n\t\t.post('/signup', credentials)\r\n\t\t.then(successStatus)\r\n\t\t.catch(internalServerError);\r\n}\r\n\r\nexport function logout() {\r\n\treturn authService\r\n\t\t.delete('/logout', {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(successStatus)\r\n\t\t.catch(internalServerError);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { signup } from '../services/auth';\r\nimport './auth.css';\r\nimport * as CONSTS from '../utils/consts';\r\nimport * as PATHS from '../utils/paths';\r\n\r\nfunction Signup(props) {\r\n\tconst { authenticate } = props;\r\n\r\n\tconst initialState = {\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tpassword: ''\r\n\t};\r\n\r\n\tconst [formData, setFormData] = useState(initialState);\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tconst { name, value } = event.target;\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst credentials = {\r\n\t\t\tusername: formData.username,\r\n\t\t\tpassword: formData.password,\r\n\t\t\temail: formData.email\r\n\t\t};\r\n\r\n\t\tsignup(credentials).then((res) => {\r\n\t\t\t// successful signup\r\n\t\t\tconsole.log(res);\r\n\t\t\tif (!res.status) {\r\n\t\t\t\tconsole.log('error');\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\r\n\t\t\tprops.authenticate(res.data.user);\r\n\t\t\tprops.history.push(PATHS.HOMEPAGE);\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Sign Up</h1>\r\n\t\t\t<form onSubmit={handleSubmit} className='auth__form'>\r\n\t\t\t\t<label htmlFor='input-username'>Username</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='input-username'\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tname='username'\r\n\t\t\t\t\tplaceholder='Text'\r\n\t\t\t\t\tvalue={formData.username}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor='input-username'>Email</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='input-email'\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tname='email'\r\n\t\t\t\t\tplaceholder='Text'\r\n\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor='input-password'>Password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='input-password'\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tname='password'\r\n\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tminLength='8'\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<button className='button__submit' type='submit'>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Signup;\r\n","export const HOMEPAGE = \"/\";\r\nexport const SIGNUPPAGE = \"/auth/signup\";\r\nexport const LOGINPAGE = \"/auth/login\";\r\nexport const PROTECTEDPAGE = \"/protected\";\r\n","import React, { useState } from 'react';\r\nimport { login } from '../services/auth';\r\nimport './Signup';\r\nimport * as CONSTS from '../utils/consts';\r\n\r\nfunction LogIn(props) {\r\n\tconst { authenticate } = props;\r\n\r\n\tconst initialState = {\r\n\t\tusername: '',\r\n\t\tpassword: ''\r\n\t};\r\n\r\n\tconst [formData, setFormData] = useState(initialState);\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tconst { name, value } = event.target;\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst credentials = {\r\n\t\t\tusername: formData.username,\r\n\t\t\tpassword: formData.password\r\n\t\t};\r\n\r\n\t\tlogin(credentials).then((res) => {\r\n\t\t\tif (!res.status) {\r\n\t\t\t\tconsole.log('error');\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\r\n\t\t\tauthenticate(res.data.user);\r\n\t\t\tprops.history.push('/');\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Log In</h1>\r\n\t\t\t<form onSubmit={handleSubmit} className='signup__form'>\r\n\t\t\t\t<label htmlFor='input-username'>Username</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='input-username'\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tname='username'\r\n\t\t\t\t\tplaceholder='username'\r\n\t\t\t\t\tvalue={formData.username}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor='input-password'>Password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='input-password'\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tname='password'\r\n\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tminLength='8'\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<button className='button__submit' type='submit'>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default LogIn;\r\n","import React from 'react';\r\n\r\nconst ProtectedPage = (props) => {\r\n\tconsole.log(props);\r\n\r\n\tconst { user } = props;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>This page is protected just for you, {user.username}!</h1>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProtectedPage;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\n// this kind of component is a `wrapper` around the React router dom Route where we immediately pass every single prop down. Instead of writing things with the render\r\nconst NormalRoute = ({ exact, to, path, component, ...componentProps }) => {\r\n  const Component = component;\r\n  return (\r\n    <Route\r\n      exact={exact}\r\n      path={path || to}\r\n      render={(props) => <Component {...componentProps} {...props} />}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NormalRoute;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\n// the protected route component must take a user in order to check if the user is authenticated or not. If not moves the user to the login page\r\nconst ProtectedRoute = ({\r\n\tuser,\r\n\texact,\r\n\tto,\r\n\tpath,\r\n\tcomponent,\r\n\t...componentProps\r\n}) => {\r\n\tconst Component = component;\r\n\tif (!user) {\r\n\t\treturn <Redirect to={'/auth/login'} />;\r\n\t}\r\n\treturn (\r\n\t\t<Route\r\n\t\t\texact={exact}\r\n\t\t\tpath={path || to}\r\n\t\t\trender={(props) => (\r\n\t\t\t\t<Component {...componentProps} {...props} user={user} />\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Switch } from 'react-router-dom';\r\nimport LoadingComponent from './components/Loading';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport HomePage from './pages/HomePage';\r\nimport LogIn from './pages/LogIn';\r\nimport ProtectedPage from './pages/ProtectedPage';\r\nimport Signup from './pages/Signup';\r\nimport NormalRoute from './routing-components/NormalRoute';\r\nimport ProtectedRoute from './routing-components/ProtectedRoute';\r\nimport { getLoggedIn, logout } from './services/auth';\r\nimport * as CONSTS from './utils/consts';\r\n\r\nfunction App() {\r\n\tconst [user, setUser] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\r\n\t\tif (!accessToken) {\r\n\t\t\tsetUser(null);\r\n\t\t}\r\n\t\tgetLoggedIn(accessToken).then((res) => {\r\n\t\t\tconsole.log(res);\r\n\t\t\tif (!res.data) {\r\n\t\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\r\n\t\t\t\tsetUser(null);\r\n\t\t\t} else {\r\n\t\t\t\tsetUser(res.data.user);\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst handleLogout = () => {\r\n\t\tconst accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\r\n\t\tif (!accessToken) {\r\n\t\t\tsetUser(null);\r\n\t\t}\r\n\t\tlogout(accessToken).then((res) => {\r\n\t\t\tif (!res.status) {\r\n\t\t\t\tconsole.error('💡 SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\r\n\t\t\t}\r\n\r\n\t\t\tlocalStorage.removeItem(CONSTS.ACCESS_TOKEN);\r\n\t\t\tsetUser(null);\r\n\t\t});\r\n\t};\r\n\r\n\tconst authenticate = (user) => {\r\n\t\tsetUser(user);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='App'>\r\n\t\t\t<Navbar handleLogout={handleLogout} user={user} />\r\n\r\n\t\t\t<Switch>\r\n\t\t\t\t<NormalRoute exact path={'/'} component={HomePage} />\r\n\t\t\t\t<NormalRoute\r\n\t\t\t\t\texact\r\n\t\t\t\t\tpath={'/auth/signup'}\r\n\t\t\t\t\tauthenticate={authenticate}\r\n\t\t\t\t\tcomponent={Signup}\r\n\t\t\t\t/>\r\n\t\t\t\t<NormalRoute\r\n\t\t\t\t\texact\r\n\t\t\t\t\tpath={'/auth/login'}\r\n\t\t\t\t\tauthenticate={authenticate}\r\n\t\t\t\t\tcomponent={LogIn}\r\n\t\t\t\t/>\r\n\t\t\t\t<ProtectedRoute\r\n\t\t\t\t\texact\r\n\t\t\t\t\tpath={'/protected'}\r\n\t\t\t\t\tcomponent={ProtectedPage}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t/>\r\n\t\t\t</Switch>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}